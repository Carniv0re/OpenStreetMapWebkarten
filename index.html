<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de" lang="de-de">
	<head>
		<title>Map | Testanwendung</title>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
		<meta http-equiv="content-script-type" content="text/javascript" />
		<meta http-equiv="content-style-type" content="text/css" />
		<meta http-equiv="content-language" content="en" />
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
		<link rel="stylesheet" type="text/css" href="Leaflet.markercluster-1.0.4/dist/MarkerCluster.css"></link>
		<link rel="stylesheet" type="text/css" href="Leaflet.markercluster-1.0.4/dist/MarkerCluster.Default.css"></link>
		<link rel="stylesheet" type="text/css" href="map.css"></link>
		<link href='https://api.mapbox.com/mapbox-gl-js/v0.34.0/mapbox-gl.css' rel='stylesheet' />
		<!--[if IE]>
		<link rel="stylesheet" type="text/css" href="ie_map.css"></link>
		<![endif]-->
		<script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>
		<script src='https://api.mapbox.com/mapbox-gl-js/v0.34.0/mapbox-gl.js'></script>
		<script src='https://api.mapbox.com/mapbox.js/v3.0.1/mapbox.js'></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

		<script type="text/javascript" src="Leaflet.markercluster-1.0.4/dist/leaflet.markercluster.js"></script>
		
		<script type="text/javascript" src="JS/config.js"></script>
		<script type="text/javascript" src="JS/staticMapElements.js"></script>
		<script type="text/javascript" src="JS/geojsonHandler.js"></script>
	</head>
	<body>
		<div id="mapid"></div>

		<div id="latlng"></div>

		<script type="text/javascript">
			var map = L.map('mapid', {
				center: [47.22320, 8.81744],
				zoom: 17,
				layers: [mapboxSatellite, mapboxStreets]
			});
			
			var trainStationPath = "GeoJSON/trainStation.geojson";
			var building6Path = "GeoJSON/building6.geojson";
			var castleJSON = "GeoJSON/castles.geojson";
			var castleIcon = "img/Castle.png";
			
			var geoJTrain = getGeojson(trainStationPath);
			var geoJB6 = getGeojson(building6Path);
			
			 var castles = new L.LayerGroup(),
				layerIcon = L.icon({
					iconUrl: castleIcon,
					iconSize: [18, 18]
			}),
			castles = loadGeojson(castleJSON, castles, layerIcon);
			
			function postLatlngOnMousemove(e) {
				$('#latlng').html(e.latlng.toString());
			}
			
			marker.bindPopup("<b>F채schtinseli</b>");
			polygon.bindPopup("<b>Geb채ude 8</b>");
			circle.bindPopup("<b>Heilig H체sli</b>");
			geoJTrain.bindPopup("<b>Bahnhof Rapperswil</b>");
			geoJB6.bindPopup("<b>Geb채ude 6</b>");
			
			var mapElements = L.layerGroup([marker, polygon, circle, geoJTrain, geoJB6]).addTo(map);
			castles.addTo(map);
			
			var overlayMaps = {
				"Castles": castles,
				"Map elements": mapElements
			};
			
			L.control.layers(baseMaps, overlayMaps).addTo(map);
			
			map.on('mousemove', postLatlngOnMousemove);
		</script>
	</body>
</html>