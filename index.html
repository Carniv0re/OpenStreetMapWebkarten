<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de" lang="de-de">
<head>
<title>Map | Testanwendung</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-script-type" content="text/javascript" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en" />
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
<link rel="stylesheet" type="text/css" href="map.css"></link>
<link href='https://api.mapbox.com/mapbox-gl-js/v0.34.0/mapbox-gl.css' rel='stylesheet' />
<!--[if IE]>
<link rel="stylesheet" type="text/css" href="ie_map.css"></link>
<![endif]-->
<script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>
<script type="text/javascript" src="http://www.openstreetmap.org/openlayers/OpenStreetMap.js"></script>
<script src='https://api.mapbox.com/mapbox-gl-js/v0.34.0/mapbox-gl.js'></script>
<script src='https://api.mapbox.com/mapbox.js/v3.0.1/mapbox.js'></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<script type="text/javascript" src="JS/geojsonHandler.js"></script>

<div id="mapid"></div>

<div id="latlng"></div>

<script type="text/javascript">
	L.mapbox.accessToken = 'pk.eyJ1Ijoic2ZyaXRzY2hpIiwiYSI6ImNqMTZpZHd4ZjAyZHQzMm16OHNmNzF5dHgifQ.mxPUN0DeXnRu85ly5fBq8g';
	
	var map = L.mapbox.map('mapid', 'mapbox.streets')
		.setView([47.22320, 8.81744], 17);
		
	var marker = L.marker([47.22234, 8.81727]).addTo(map);
	var polygon = L.polygon([
		[47.22354, 8.81872],
		[47.22325, 8.8182],
		[47.22294, 8.81857],
		[47.22323, 8.81909]
	], {
		color: '#dde21a',
		fillColor: 'yellow',
		fillOpacity: 0.5
	}).addTo(map);
	var circle = L.circle([47.2225, 8.81481], {
		color: 'red',
		fillColor: '#f03',
		fillOpacity: 0.5,
		radius: 20
	}).addTo(map);
	var popup = L.popup();
	
	var trainStationPath = "GeoJSON/trainStation.geojson";
	var building6Path = "GeoJSON/building6.geojson";
	
	var geoJ = getGeojson(building6Path);
	geoJ.addTo(map);
	
	function onClick(e) {
	map
		.setView(e.latlng);
	}
	
	function postLatlngOnClick(e) {
		$('#latlng').html(e.latlng.toString());
	}
	
	marker.bindPopup("<b>Fäschtinseli</b>").openPopup();
	polygon.bindPopup("<b>Gebäude 8</b>").openPopup();
	circle.bindPopup("<b>Heilig Hüsli</b><br>...").openPopup();
	
	marker.on('click', onClick);
	polygon.on('click', onClick);
	circle.on('click', onClick);
	geoJ.on('click', onClick);
	map.on('click', postLatlngOnClick);
	
	loadGeojson(map, trainStationPath);
</script>