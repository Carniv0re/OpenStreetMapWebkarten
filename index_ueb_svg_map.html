<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>

<head>
	<meta charset="UTF-8">
    <title>HTML SVG Map - Mittelalter-Kalender</title>
</head>
<body>
    <div id="InfoBox2"></div>
	<div id="tooltip"></div>
    <p>HTML SVG Map - Mittelalter-Kalender</p>
	<div id="eventmap-container">	
		<object data="HTML-image/imageMap.svg" type="image/svg+xml" id="eventmap" >
		</object>
	</div>
	<style type="text/css">
		#eventmap-container {
			width: 65%	;
			height: 100vh;
		}

		body { 
			font-family: Arial, Helvetica, sans-serif; 
		} 

        #InfoBox2 {
			position: absolute;
			visibility: visible;
			left: 25px; 
			top: -100px; 
			z-index: +10;
            background-color: #FFFFFF;
            /*background:url(bg04-copy.gif) #F9F9F9 bottom right no-repeat;*/
            width: 350px;
            padding: 10px;
            margin: 0px;
            border: 1px solid #000000;
            font-family: Arial, Helvetica, sans-serif;
            font-size: 11px;
            line-height: 130%;
            color: #5F5F5F;
        }

		#tooltip {
			position: absolute;
			z-index: +5;
			background-color: rgba(255,255,255,.75);
			padding:20px;
			border:1px solid #ccc;
			box-shadow: 0 0 3px rgba(0,0,0,.3);
			-webkit-box-shadow: 0 0 3px rgba(0,0,0,.3);
			border-radius:3px;
			-webkit-border-radius:3px;
			position:absolute;
			top:5px;
			left:50px;
		}

		#tooltip:hover {
			display: inline-block;
		}

		span.infoText {
			color: #000000;
			font-size: 18px;
		}
	</style>
	<script type="text/javascript">
	document.getElementById("eventmap").addEventListener("load", function() {
		var doc = this.getSVGDocument();

        doc.addEventListener("click", function(e) {
            if(e.target.classList.contains("event-point")) {
                BoxAnzeigen(Number(e.target.getAttribute("data-event-id")), e);
                destroyPopup();
            }
        });

        doc.addEventListener("mouseover", function(e) {
           if(e.target.classList.contains("event-point")) {
               displayPopup(e.target.getAttribute("data-event-id"), e);
		   } else {
               BoxAusblenden();
               destroyPopup();
		   }
		});
	});
	
		var InfoBox = [
			['nicht benutzt', ''],
            ['<span class="infoText">Könix Album-Release-party<\/span><br><br>13.05.17<br><br>Schmiedestrasse 1 5400 Baden<br><br><a href="http://werkk-baden.ch/">http://werkk-baden.ch/</a><br><br>', 'http://werkk-baden.ch/'],
            ['<span class="infoText">Mittelalterfest Chuzenhöhli<\/span><br><br20.05.17<br><br>Zofingen AG<br><br><a href="https://mittelalterfest.ch">https://mittelalterfest.ch</a><br><br>', 'https://mittelalterfest.ch'],
            ['<span class="infoText">Seetaler Ritterspiele mit Mittelaltermarkt und Unterhaltung<\/span><br><br>20.05.17<br><br>Hochdorf<br><br><a href="http://www.seetalerritterspiele.ch/">http://www.seetalerritterspiele.ch/</a><br><br>', 'http://www.seetalerritterspiele.ch/'],
            ['<span class="infoText">Mittelalterfest Schloss Laupen  Laupen 1317<\/span><br><br>25.05.17 - 28.05.17<br><brSchloss Laupen  BE<br><br><a href="http://www.schloss.laupen.ch">http://www.schloss.laupen.ch</a><br><br>', 'http://www.schloss.laupen.ch'],
            ['<span class="infoText">Mittelalterfest Lachen<\/span><br><br>05.05.17 - 07.05.17<br><br>Seestrasse 2, 8853 Lachen SZ<br><br><a href="http://www.comites-feriati.ch">http://www.comites-feriati.ch</a><br><br>', 'http://www.comites-feriati.ch'],
			['<span class="infoText">Ritterspiele mit Mittelaltermarkt und Gaukelei<\/span><br><br>13.05.17 - 14.05.17<br><br>Camping Trin, via Geraglia 2, 7016 Trin Mulin<br><br><a href="http://www.campingtrin.ch">http://www.campingtrin.ch</a><br><br>', 'http://www.campingtrin.ch'],
			['<span class="infoText">Mittelalterspektakel Hinwil<\/span><br><br>26.05.17 - 28.05.17<br><br>Hinwil ZH<br><br><a href="http://www.turnei.ch">http://www.turnei.ch</a><br><br>', 'http://www.turnei.ch'],
            ['<span class="infoText">La Spada nella Rocca<\/span><br><br>20.05.17 - 21.05.17<br><br>Auf der Burg Castelgrande, Bellinzona TI<br><br><a href="http://www.laspadanellarocca.ch">http://www.laspadanellarocca.ch</a><br><br>', 'http://www.laspadanellarocca.ch']
        ];

        overdiv = "0";

        function getEventTitleFromId(id) {
            var eventElement = InfoBox[id][0];
            var startIndex = eventElement.indexOf(">");
            var tmp = eventElement.substring(startIndex + 1);
            var endIndex = tmp.indexOf("<");
            return tmp.substring(0, endIndex);
		}

        function BoxAnzeigen(a, mouseEvent) {
            if (!InfoBox[a][0]) {
                InfoBox[a][0] = "Dieses PopUp (#" + a + ") ist nicht korrekt definiert<br>Die Beschreibung fehlt. Ein Array-Element mit dieser Index-Nummer wurde nicht definiert!";
            }

            var Inhalt = InfoBox[a][0];
            var InfoBox2 = document.getElementById("InfoBox2");
            InfoBox2.innerHTML = Inhalt;
            InfoBox2.style.left = mouseEvent.pageX + 15;
            InfoBox2.style.top = mouseEvent.pageY - 5;
        }


        function displayPopup(id, mouseEvent) {
            var content = getEventTitleFromId(id);
            var popup = document.getElementById("tooltip");
            popup.innerHTML = content;
            popup.style.left = mouseEvent.pageX - 30;
            popup.style.top = mouseEvent.pageY - 30;
		}

        function BoxAusblenden() {
            if (overdiv == "0") {
                document.getElementById("InfoBox2").style.top = "-1000";
            }
        }

        function destroyPopup() {
            document.getElementById("tooltip").style.top = "-1000";
		}
    </script>
</body>
</html>